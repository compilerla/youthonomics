{{ cms:snippet:header }}
<div class="content-wrap">
  <div class="container-fluid" id="contact-hero" data-parallax="scroll" data-image-src="{{cms:file:homepage_hero.jpg}}" data-speed="0.7">
    <section class="row">
      <header>
        <h1 class="white">Contact Us</h1>
        <h4 class="emphasis-copy white">Get In touch with Youthonomics</h4>
      </header>
    </section>
  </div><!-- /.container-fluid#contact-hero -->
  <div class="main-content">
    <form class="contact-now" id="contact-page-form" action="mailto:info@youthonomics.com" enctype="text/plain" method="post">
      <div class="input-submit-container">
        <input class="btn outline-red" type="submit" value="Get in Touch">
      </div>
    </form>
  </div><!-- /.main-content -->
</div><!-- /.content-wrap -->

<script>
  var countriesData = {{ cms:helper:country_data }};
  var sanitizedCountryList = [];
  var sanitizedCountryIso = [];
  var comma = ',';

  function sanitizeCountries(data) {
    for (obj in data) {
      var country = data[obj];
      var countryName = country.country;
      var countryIso = country.country_iso;
      // alphebetize country list here
      sanitizedCountryList.push(countryName + ' - ' + countryIso);
    }
    sanitizedCountryList.sort();
  }

  function listCountries(data) {
    // alphebetize country list here
    sanitizeCountries(data);
    // add sanitized list to select dropdown
    for (var i = 0; i < sanitizedCountryList.length; i++) {
      var country = sanitizedCountryList[i];
      var letterCount = country.length;
      var countryIso = country.substring(letterCount - 3, letterCount);
      var countryName = country.slice(0, letterCount - 6);
      $('.country-list').append("<option value=" + countryIso + ">" + countryName + "</option>");
    }
    $('.country-list').append("<option value=\"other\">Other</option>");
  }

  function checkSelect(form, select) {
    var sel = document.forms[form].elements['country-list'];
    // value property of select list (from selected option)
    var val = sel.value;
    $('.country-list').change( function() {
      currentSelected = $(this).find(":selected").val();
      if (currentSelected === 'other') {
        $('input[name="country-other"]').prop('required',true);
        $('input[name="country-other"]').parent('.input-text-container').removeClass('hidden');
      } else {
        $('input[name="country-other"]').prop('required',false);
        $('input[name="country-other"]').parent('.input-text-container').addClass('hidden');
      }
    });
  }

  $(document).ready(function(){
    console.log(countriesData);
    listCountries(countriesData);
    checkSelect('contact-page-form', 'country-name');
  });
</script>
{{ cms:snippet:footer }}
